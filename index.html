<!doctype html>
<html lang="el">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Text Humanizer</title>
    <style>
      :root {
        --bg: #0b1020;
        --panel: rgba(255, 255, 255, 0.06);
        --text: #e8eefc;
        --muted: rgba(232, 238, 252, 0.72);
        --accent: #7c5cff;
        --accent2: #27d3a2;
        --danger: #ff4d6d;
        --shadow: 0 18px 50px rgba(0,0,0,.45);
        --radius: 18px;
        --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: var(--sans);
        color: var(--text);
        background:
          radial-gradient(1200px 800px at 15% 10%, rgba(124, 92, 255, 0.25), transparent 55%),
          radial-gradient(1000px 700px at 85% 20%, rgba(39, 211, 162, 0.18), transparent 60%),
          radial-gradient(1000px 700px at 50% 90%, rgba(255, 77, 109, 0.12), transparent 55%),
          var(--bg);
        min-height: 100vh;
        min-height: 100dvh;
        padding: 12px;
        display: grid;
        place-items: center;
      }
      .app {
        width: min(900px, 100%);
        border-radius: var(--radius);
        background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
        border: 1px solid rgba(255,255,255,0.10);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        padding: 14px 14px 10px 14px;
        flex-wrap: wrap;
      }
      .title h1 {
        margin: 0;
        font-size: 16px;
        letter-spacing: .3px;
      }
      @media (max-width: 500px) {
        .title h1 { font-size: 14px; }
      }
      .toolbar {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }
      .btn {
        appearance: none;
        border: 1px solid rgba(255,255,255,0.10);
        background: rgba(255,255,255,0.06);
        color: var(--text);
        border-radius: 999px;
        padding: 10px 14px;
        font-size: 14px;
        cursor: pointer;
        transition: transform .06s ease, background .15s ease, border-color .15s ease;
        white-space: nowrap;
        touch-action: manipulation;
      }
      .btn:hover { background: rgba(255,255,255,0.10); border-color: rgba(255,255,255,0.16); }
      .btn:active { transform: scale(0.97); }
      .btn.primary {
        background: linear-gradient(135deg, rgba(124,92,255,0.90), rgba(124,92,255,0.55));
        border-color: rgba(124,92,255,0.60);
      }
      .btn.danger {
        background: linear-gradient(135deg, rgba(255,77,109,0.82), rgba(255,77,109,0.45));
        border-color: rgba(255,77,109,0.55);
      }
      .btn.help {
        background: linear-gradient(135deg, rgba(39,211,162,0.80), rgba(39,211,162,0.45));
        border-color: rgba(39,211,162,0.55);
      }
      .main {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        padding: 10px 14px 14px 14px;
      }
      @media (max-width: 700px) {
        .main { grid-template-columns: 1fr; }
      }
      .panel {
        border-radius: var(--radius);
        background: rgba(255,255,255,0.05);
        border: 1px solid rgba(255,255,255,0.08);
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }
      .panel h2 {
        margin: 0;
        padding: 10px 12px;
        font-size: 12px;
        color: var(--muted);
        letter-spacing: .4px;
        text-transform: uppercase;
        border-bottom: 1px solid rgba(255,255,255,0.08);
      }
      textarea {
        width: 100%;
        min-height: 200px;
        flex: 1;
        padding: 12px;
        border: 0;
        background: rgba(0,0,0,0.22);
        color: var(--text);
        outline: none;
        resize: none;
        font-size: 15px;
        line-height: 1.5;
        font-family: var(--sans);
      }
      @media (max-width: 700px) {
        textarea { min-height: 150px; font-size: 16px; }
      }
      .panel .footer {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding: 8px 12px;
        background: rgba(255,255,255,0.04);
        border-top: 1px solid rgba(255,255,255,0.08);
        color: var(--muted);
        font-size: 12px;
      }
      .mono { font-family: var(--mono); }
      .toast {
        position: fixed;
        left: 50%;
        bottom: 20px;
        transform: translateX(-50%);
        background: rgba(0,0,0,0.75);
        border: 1px solid rgba(255,255,255,0.15);
        color: var(--text);
        padding: 12px 18px;
        border-radius: 999px;
        box-shadow: var(--shadow);
        font-size: 14px;
        opacity: 0;
        pointer-events: none;
        transition: opacity .2s ease;
        z-index: 100;
      }
      .toast.show { opacity: 1; }

      /* Modal */
      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        opacity: 0;
        pointer-events: none;
        transition: opacity .2s ease;
        z-index: 200;
      }
      .modal-overlay.show {
        opacity: 1;
        pointer-events: auto;
      }
      .modal {
        background: linear-gradient(180deg, rgba(30,35,50,0.98), rgba(20,25,40,0.98));
        border: 1px solid rgba(255,255,255,0.12);
        border-radius: var(--radius);
        max-width: 500px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: var(--shadow);
        transform: scale(0.95);
        transition: transform .2s ease;
      }
      .modal-overlay.show .modal {
        transform: scale(1);
      }
      .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 18px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
      }
      .modal-header h3 {
        margin: 0;
        font-size: 16px;
      }
      .modal-close {
        background: none;
        border: none;
        color: var(--muted);
        font-size: 24px;
        cursor: pointer;
        padding: 0;
        line-height: 1;
      }
      .modal-close:hover { color: var(--text); }
      .modal-body {
        padding: 18px;
        font-size: 14px;
        line-height: 1.6;
        color: var(--muted);
      }
      .modal-body h4 {
        color: var(--text);
        margin: 16px 0 8px 0;
        font-size: 14px;
      }
      .modal-body h4:first-child { margin-top: 0; }
      .modal-body ul {
        margin: 0;
        padding-left: 20px;
      }
      .modal-body li { margin: 4px 0; }
      .modal-body code {
        background: rgba(255,255,255,0.08);
        padding: 2px 6px;
        border-radius: 4px;
        font-family: var(--mono);
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header>
        <div class="title">
          <h1>ChatGPT → Ανθρώπινο κείμενο</h1>
        </div>
        <div class="toolbar">
          <button id="pasteBtn" class="btn">Paste</button>
          <button id="cleanBtn" class="btn primary">Καθάρισε</button>
          <button id="copyBtn" class="btn">Copy</button>
          <button id="clearBtn" class="btn danger">Clear</button>
          <button id="helpBtn" class="btn help">Help</button>
        </div>
      </header>

      <div class="main">
        <div class="panel">
          <h2>Input</h2>
          <textarea id="input" placeholder="Κάνε paste εδώ το κείμενο από ChatGPT…"></textarea>
          <div class="footer">
            <div id="inCount" class="mono">0</div>
          </div>
        </div>
        <div class="panel">
          <h2>Output</h2>
          <textarea id="output" readonly placeholder="Το καθαρό κείμενο εδώ…"></textarea>
          <div class="footer">
            <div id="outCount" class="mono">0</div>
          </div>
        </div>
      </div>
    </div>

    <div class="toast" id="toast">Copied</div>

    <div class="modal-overlay" id="modalOverlay">
      <div class="modal">
        <div class="modal-header">
          <h3>Τι κάνει αυτό το εργαλείο;</h3>
          <button class="modal-close" id="modalClose">&times;</button>
        </div>
        <div class="modal-body">
          <p>Μετατρέπει κείμενο από το ChatGPT σε πιο φυσικό, ανθρώπινο κείμενο.</p>
          
          <h4>Αφαιρεί αυτόματα:</h4>
          <ul>
            <li>Markdown: <code>**bold**</code>, <code>`code`</code>, headings, links</li>
            <li>Bullets και λίστες: <code>-</code>, <code>•</code>, <code>1.</code></li>
            <li>ChatGPT intros: "Sure,", "Of course,", "Certainly,"</li>
            <li>AI disclaimers: "As an AI...", "I'm just an AI..."</li>
            <li>Έξυπνα εισαγωγικά: <code>" "</code> → <code>"</code></li>
            <li>Long dashes: <code>—</code>, <code>–</code> → κόμμα</li>
            <li>AI σύμβολα: <code>»</code> <code>«</code> <code>→</code> <code>•</code> <code>✓</code> <code>★</code> κλπ</li>
          </ul>

          <h4>Πώς το χρησιμοποιείς:</h4>
          <ul>
            <li><strong>Paste</strong> - Επικόλληση από clipboard</li>
            <li><strong>Καθάρισε</strong> - Εκτέλεση καθαρισμού</li>
            <li><strong>Copy</strong> - Αντιγραφή αποτελέσματος</li>
            <li><strong>Clear</strong> - Καθαρισμός όλων</li>
          </ul>

          <h4>Συντόμευση:</h4>
          <p><code>Ctrl/⌘ + Enter</code> = Καθάρισε</p>
        </div>
      </div>
    </div>

    <script>
      const inputEl = document.getElementById('input');
      const outputEl = document.getElementById('output');
      const toastEl = document.getElementById('toast');
      const inCount = document.getElementById('inCount');
      const outCount = document.getElementById('outCount');
      const modalOverlay = document.getElementById('modalOverlay');

      function showToast(msg) {
        toastEl.textContent = msg;
        toastEl.classList.add('show');
        setTimeout(() => toastEl.classList.remove('show'), 1200);
      }

      function updateCounts() {
        inCount.textContent = (inputEl.value || '').length;
        outCount.textContent = (outputEl.value || '').length;
      }

      function normalizeNewlines(s) {
        return String(s).replaceAll('\r\n', '\n').replaceAll('\r', '\n');
      }

      function stripMarkdown(s) {
        s = s.replace(/```[\s\S]*?```/g, (m) => {
          return m.replace(/^```[^\n]*\n?/, '').replace(/```$/, '');
        });
        s = s.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '$1');
        s = s.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '$1');
        s = s.replace(/^\s{0,3}#{1,6}\s+/gm, '');
        s = s.replace(/^\s{0,3}>\s?/gm, '');
        s = s.replace(/\*\*([^*]+)\*\*/g, '$1');
        s = s.replace(/\*([^*]+)\*/g, '$1');
        s = s.replace(/__([^_]+)__/g, '$1');
        s = s.replace(/_([^_]+)_/g, '$1');
        s = s.replace(/~~([^~]+)~~/g, '$1');
        s = s.replace(/`([^`]+)`/g, '$1');
        s = s.replace(/^\s{0,3}([-*_])(\s*\1){2,}\s*$/gm, '');
        return s;
      }

      function normalizeSmartQuotes(s) {
        return s
          .replaceAll('"', '"')
          .replaceAll('"', '"')
          .replaceAll(''', "'")
          .replaceAll(''', "'");
      }

      function removeDoubleQuotesOnly(s) {
        return String(s).replaceAll('"', '');
      }

      function replaceLongDashes(s) {
        return String(s)
          .replace(/(\S)\s*(?:—|–|--)\s*(\S)/g, '$1, $2')
          .replace(/(?:—|–)/g, ' ');
      }

      function removeAiSymbols(s) {
        return String(s)
          .replaceAll('»', '')
          .replaceAll('«', '')
          .replaceAll('→', '')
          .replaceAll('←', '')
          .replaceAll('↔', '')
          .replaceAll('⇒', '')
          .replaceAll('⇐', '')
          .replaceAll('•', '')
          .replaceAll('◦', '')
          .replaceAll('▪', '')
          .replaceAll('▸', '')
          .replaceAll('▹', '')
          .replaceAll('…', '...')
          .replaceAll('✓', '')
          .replaceAll('✔', '')
          .replaceAll('✗', '')
          .replaceAll('✘', '')
          .replaceAll('☑', '')
          .replaceAll('☐', '')
          .replaceAll('★', '')
          .replaceAll('☆', '')
          .replaceAll('⭐', '')
          .replaceAll('©', '')
          .replaceAll('®', '')
          .replaceAll('™', '')
          .replaceAll('°', '')
          .replaceAll('·', ' ')
          .replaceAll('│', '')
          .replaceAll('─', '')
          .replaceAll('├', '')
          .replaceAll('└', '')
          .replaceAll('┌', '')
          .replaceAll('┐', '')
          .replaceAll('┘', '')
          .replaceAll('×', 'x')
          .replaceAll('÷', '/')
          .replaceAll('±', '+/-')
          .replaceAll('≈', '~')
          .replaceAll('≠', '!=')
          .replaceAll('≤', '<=')
          .replaceAll('≥', '>=')
          .replace(/  +/g, ' ');
      }

      function applyImRule(s) {
        return s
          .replace(/\bI['']m\b/g, 'im')
          .replace(/\bI['']M\b/g, 'IM');
      }

      function removeIntroOpeners(s) {
        const lines = normalizeNewlines(s).split('\n');
        let i = 0;
        while (i < lines.length && lines[i].trim() === '') i++;
        if (i >= lines.length) return s;
        const line = lines[i].trim();
        const patterns = [
          /^sure[!,.\s-]/i,
          /^of course[!,.\s-]/i,
          /^certainly[!,.\s-]/i,
          /^absolutely[!,.\s-]/i,
          /^here(?:'|')s[!,.\s-]/i,
          /^here is[!,.\s-]/i,
          /^okay[!,.\s-]/i,
          /^ok[!,.\s-]/i,
          /^great[!,.\s-]/i,
        ];
        for (const p of patterns) {
          if (p.test(line)) {
            lines.splice(i, 1);
            return lines.join('\n');
          }
        }
        return s;
      }

      function removeAsAiLines(s) {
        const lines = normalizeNewlines(s).split('\n');
        const out = [];
        for (const raw of lines) {
          const t = raw.trim();
          if (!t) { out.push(raw); continue; }
          if (/^as an ai\b/i.test(t)) continue;
          if (/^i(?:'|')m (?:just )?an ai\b/i.test(t)) continue;
          if (/^i (?:can(?:'|')t|cannot)\b/i.test(t) && /as an ai|language model/i.test(t)) continue;
          out.push(raw);
        }
        return out.join('\n');
      }

      function sentencePunctuate(s) {
        const t = s.trim();
        if (!t) return '';
        if (/[.!?…;:]$/.test(t)) return t;
        return t + '.';
      }

      function bulletsToParagraphs(s) {
        const lines = normalizeNewlines(s).split('\n');
        const out = [];
        let bucket = [];

        function flushBucket() {
          if (bucket.length === 0) return;
          const para = bucket.map(sentencePunctuate).join(' ');
          out.push(para);
          bucket = [];
        }

        function isBulletLine(line) {
          const t = line.trimStart();
          return (
            /^(-{1,2}|•|\*|—|–)\s+/.test(t) ||
            /^\d{1,3}[\.\)]\s+/.test(t)
          );
        }

        function stripBulletMarker(line) {
          const t = line.trimStart();
          return t
            .replace(/^(-{1,2}|•|\*|—|–)\s+/, '')
            .replace(/^\d{1,3}[\.\)]\s+/, '');
        }

        for (let i = 0; i < lines.length; i++) {
          const line = lines[i];
          const trimmed = line.trim();
          if (!trimmed) {
            flushBucket();
            out.push('');
            continue;
          }
          if (isBulletLine(line)) {
            bucket.push(stripBulletMarker(line));
            continue;
          }
          if (bucket.length > 0 && /^\s{2,}/.test(line)) {
            bucket[bucket.length - 1] = (bucket[bucket.length - 1] + ' ' + trimmed).trim();
            continue;
          }
          flushBucket();
          out.push(line);
        }
        flushBucket();
        return out.join('\n');
      }

      function flattenWrappedLines(s) {
        const lines = normalizeNewlines(s).split('\n');
        const out = [];
        let para = [];

        function flushPara() {
          if (para.length === 0) return;
          const joined = para.join(' ')
            .replace(/\s+/g, ' ')
            .replace(/\s+([,.;:!?])/g, '$1')
            .trim();
          out.push(joined);
          para = [];
        }

        for (const line of lines) {
          const t = line.trim();
          if (!t) {
            flushPara();
            out.push('');
            continue;
          }
          para.push(t);
        }
        flushPara();

        return out.join('\n').replace(/\n{3,}/g, '\n\n').trim() + '\n';
      }

      function finalPolish(s) {
        s = normalizeNewlines(s);
        s = s.replace(/[ \t]+$/gm, '');
        s = s.replace(/[ \t]{2,}/g, ' ');
        s = s.replace(/^\n+/, '').replace(/\n+$/, '');
        return s;
      }

      function cleanText(input) {
        let s = normalizeNewlines(input || '');

        s = normalizeSmartQuotes(s);
        s = applyImRule(s);
        s = removeDoubleQuotesOnly(s);
        s = replaceLongDashes(s);
        s = removeAiSymbols(s);
        s = removeIntroOpeners(s);
        s = removeAsAiLines(s);
        s = stripMarkdown(s);
        s = bulletsToParagraphs(s);
        s = flattenWrappedLines(s);
        s = finalPolish(s);

        return s;
      }

      function doClean() {
        const raw = inputEl.value;
        const cleaned = cleanText(raw);
        outputEl.value = cleaned;
        updateCounts();
        showToast('Καθαρίστηκε!');
      }

      async function copyOut() {
        const text = outputEl.value;
        if (!text) { showToast('Τίποτα για copy'); return; }
        try {
          await navigator.clipboard.writeText(text);
          showToast('Copied!');
        } catch {
          outputEl.focus();
          outputEl.select();
          document.execCommand('copy');
          showToast('Copied!');
        }
      }

      async function pasteIn() {
        try {
          const text = await navigator.clipboard.readText();
          inputEl.value = text;
          updateCounts();
          showToast('Pasted!');
        } catch {
          inputEl.focus();
          showToast('Paste blocked - κάνε Ctrl+V');
        }
      }

      function openHelp() {
        modalOverlay.classList.add('show');
      }

      function closeHelp() {
        modalOverlay.classList.remove('show');
      }

      document.getElementById('cleanBtn').addEventListener('click', doClean);
      document.getElementById('pasteBtn').addEventListener('click', pasteIn);
      document.getElementById('copyBtn').addEventListener('click', copyOut);
      document.getElementById('clearBtn').addEventListener('click', () => {
        inputEl.value = '';
        outputEl.value = '';
        updateCounts();
        inputEl.focus();
        showToast('Cleared!');
      });
      document.getElementById('helpBtn').addEventListener('click', openHelp);
      document.getElementById('modalClose').addEventListener('click', closeHelp);
      modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) closeHelp();
      });

      inputEl.addEventListener('input', updateCounts);
      outputEl.addEventListener('input', updateCounts);
      document.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') { e.preventDefault(); doClean(); }
        if (e.key === 'Escape') closeHelp();
      });

      updateCounts();
      inputEl.focus();
    </script>
  </body>
</html>
